{"version":3,"sources":["app/experimental/color.js","app/experimental/components/app.jsx","app/experimental/components/collapsible_panel.jsx","app/experimental/components/debug_info.jsx","app/experimental/components/generate_world_form.jsx","app/experimental/components/input_spinner.jsx","app/experimental/game.js","app/experimental/interaction.js","app/experimental/map_drawer.js","app/experimental/star_system.js","app/experimental/stellar_body.js","app/experimental/texture_generators/blur_generator.js","app/experimental/texture_generators/density_map.js","app/experimental/texture_generators/points_in_circle.js","app/experimental/util.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/HA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3GA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxEA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3EA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5EA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhGA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlFA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApHA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxJA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/EA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/BA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjGA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhLA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5HA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApOA;AAAA","file":"public/app.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _util = require(\"experimental/util\");\n\nvar _util2 = _interopRequireDefault(_util);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Color = function () {\n  function Color() {\n    _classCallCheck(this, Color);\n  }\n\n  _createClass(Color, null, [{\n    key: \"random_near\",\n    value: function random_near(_ref) {\n      var _ref2 = _slicedToArray(_ref, 3),\n          r = _ref2[0],\n          g = _ref2[1],\n          b = _ref2[2];\n\n      var step = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n      var count = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 2;\n\n      return Color.for_rgb([r, g, b], function (e) {\n        return Color.random_channel(e, step, count);\n      });\n    }\n  }, {\n    key: \"random\",\n    value: function random(_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 3),\n          r = _ref4[0],\n          g = _ref4[1],\n          b = _ref4[2];\n\n      var step = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n\n      return Color.for_rgb([r, g, b], function (e) {\n        return Color.random_by_floor(e, step);\n      });\n    }\n  }, {\n    key: \"brighter\",\n    value: function brighter(_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 3),\n          r = _ref6[0],\n          g = _ref6[1],\n          b = _ref6[2];\n\n      var step = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n\n      return [r, g, b].map(function (e) {\n        return Math.min(e + step, 255);\n      });\n    }\n  }, {\n    key: \"darker\",\n    value: function darker(_ref7) {\n      var _ref8 = _slicedToArray(_ref7, 3),\n          r = _ref8[0],\n          g = _ref8[1],\n          b = _ref8[2];\n\n      var step = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n\n      return [r, g, b].map(function (e) {\n        return Math.max(e - step, 0);\n      });\n    }\n  }, {\n    key: \"to_pixi\",\n    value: function to_pixi(_ref9) {\n      var _ref10 = _slicedToArray(_ref9, 3),\n          r = _ref10[0],\n          g = _ref10[1],\n          b = _ref10[2];\n\n      return (r << 16) + (g << 8) + b;\n    }\n\n    // PRIVATE\n\n  }, {\n    key: \"for_rgb\",\n    value: function for_rgb(_ref11, func) {\n      var _ref12 = _slicedToArray(_ref11, 3),\n          r = _ref12[0],\n          g = _ref12[1],\n          b = _ref12[2];\n\n      return [func(r), func(g), func(b)];\n    }\n\n    // PRIVATE\n\n  }, {\n    key: \"random_channel\",\n    value: function random_channel(base, step, count) {\n      var rand = step * _util2.default.rand(-count, count);\n      var res = base + rand;\n      return res > 255 ? 255 : res < 0 ? 0 : res;\n    }\n\n    // PRIVATE\n\n  }, {\n    key: \"random_by_floor\",\n    value: function random_by_floor(floor, step) {\n      return floor - step * _util2.default.rand(0, floor / step | 0);\n    }\n  }]);\n\n  return Color;\n}();\n\nexports.default = Color;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _collapsible_panel = require('experimental/components/collapsible_panel');\n\nvar _collapsible_panel2 = _interopRequireDefault(_collapsible_panel);\n\nvar _debug_info = require('experimental/components/debug_info');\n\nvar _debug_info2 = _interopRequireDefault(_debug_info);\n\nvar _generate_world_form = require('experimental/components/generate_world_form');\n\nvar _generate_world_form2 = _interopRequireDefault(_generate_world_form);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar App = function (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App() {\n    _classCallCheck(this, App);\n\n    return _possibleConstructorReturn(this, (App.__proto__ || Object.getPrototypeOf(App)).apply(this, arguments));\n  }\n\n  _createClass(App, [{\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement(\n        'table',\n        { style: { margin: '5px', borderSpacing: '5px', borderCollapse: 'separate' } },\n        _react2.default.createElement(\n          'tbody',\n          null,\n          _react2.default.createElement(\n            'tr',\n            { style: { verticalAlign: 'top' } },\n            _react2.default.createElement(\n              'td',\n              null,\n              _react2.default.createElement(\n                'div',\n                { className: 'panel-group' },\n                _react2.default.createElement(\n                  'div',\n                  { className: 'panel panel-success' },\n                  _react2.default.createElement(\n                    'div',\n                    { className: 'panel-body' },\n                    _react2.default.createElement(\n                      'div',\n                      { className: '', id: 'map_container' },\n                      _react2.default.createElement('canvas', { id: 'map', width: '800', height: '800' })\n                    )\n                  )\n                ),\n                _react2.default.createElement(_collapsible_panel2.default, { header: 'debug', name: 'debug', content_func: function content_func() {\n                    return _react2.default.createElement(_debug_info2.default);\n                  } })\n              )\n            ),\n            _react2.default.createElement(\n              'td',\n              { width: '100%' },\n              _react2.default.createElement(\n                'div',\n                { className: 'panel-group' },\n                _react2.default.createElement(\n                  'div',\n                  { className: 'panel panel-success' },\n                  _react2.default.createElement(\n                    'div',\n                    { className: 'panel-body' },\n                    _react2.default.createElement(_collapsible_panel2.default, { header: 'world generating', name: 'generate_world', content_func: function content_func() {\n                        return _react2.default.createElement(_generate_world_form2.default);\n                      } })\n                  ),\n                  _react2.default.createElement('div', { className: 'panel-footer' })\n                )\n              )\n            )\n          )\n        )\n      );\n    }\n  }]);\n\n  return App;\n}(_react2.default.Component);\n\nexports.default = App;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CollapsiblePanel = function (_React$Component) {\n  _inherits(CollapsiblePanel, _React$Component);\n\n  function CollapsiblePanel(args) {\n    _classCallCheck(this, CollapsiblePanel);\n\n    var _this = _possibleConstructorReturn(this, (CollapsiblePanel.__proto__ || Object.getPrototypeOf(CollapsiblePanel)).call(this));\n\n    _this.header = args.header;\n    _this.name = args.name;\n    _this.content_func = args.content_func;\n    return _this;\n  }\n\n  _createClass(CollapsiblePanel, [{\n    key: \"render\",\n    value: function render() {\n      return _react2.default.createElement(\n        \"div\",\n        { className: \"panel panel-success\" },\n        _react2.default.createElement(\n          \"div\",\n          { className: \"panel-heading\" },\n          _react2.default.createElement(\n            \"h4\",\n            { className: \"panel-title\" },\n            _react2.default.createElement(\n              \"a\",\n              { \"data-toggle\": \"collapse\", href: '#' + this.name },\n              this.header,\n              \" \",\n              _react2.default.createElement(\"span\", { className: \"caret\" })\n            )\n          )\n        ),\n        _react2.default.createElement(\n          \"div\",\n          { id: this.name, className: \"panel-collapse collapse\" },\n          _react2.default.createElement(\n            \"div\",\n            { className: \"panel-body\" },\n            this.content_func()\n          )\n        )\n      );\n    }\n  }]);\n\n  return CollapsiblePanel;\n}(_react2.default.Component);\n\nexports.default = CollapsiblePanel;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar DebugInfo = function (_React$Component) {\n  _inherits(DebugInfo, _React$Component);\n\n  function DebugInfo() {\n    _classCallCheck(this, DebugInfo);\n\n    return _possibleConstructorReturn(this, (DebugInfo.__proto__ || Object.getPrototypeOf(DebugInfo)).apply(this, arguments));\n  }\n\n  _createClass(DebugInfo, [{\n    key: \"render\",\n    value: function render() {\n      return _react2.default.createElement(\n        \"div\",\n        null,\n        _react2.default.createElement(\n          \"div\",\n          null,\n          \"FPS: \",\n          _react2.default.createElement(\"span\", { id: \"fps_counter\" })\n        ),\n        _react2.default.createElement(\n          \"div\",\n          null,\n          \"map scale: \",\n          _react2.default.createElement(\"span\", { id: \"map_scale\" })\n        ),\n        _react2.default.createElement(\n          \"div\",\n          null,\n          \"mouse position: \",\n          _react2.default.createElement(\n            \"span\",\n            { id: \"mouse_pos\" },\n            (0, 0)\n          )\n        ),\n        _react2.default.createElement(\n          \"div\",\n          null,\n          \"world point: \",\n          _react2.default.createElement(\n            \"span\",\n            { id: \"world_pos\" },\n            (0, 0)\n          )\n        )\n      );\n    }\n  }]);\n\n  return DebugInfo;\n}(_react2.default.Component);\n\nexports.default = DebugInfo;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _input_spinner = require('experimental/components/input_spinner');\n\nvar _input_spinner2 = _interopRequireDefault(_input_spinner);\n\nvar _game = require('experimental/game');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar GenerateWorldForm = function (_React$Component) {\n  _inherits(GenerateWorldForm, _React$Component);\n\n  function GenerateWorldForm() {\n    _classCallCheck(this, GenerateWorldForm);\n\n    return _possibleConstructorReturn(this, (GenerateWorldForm.__proto__ || Object.getPrototypeOf(GenerateWorldForm)).apply(this, arguments));\n  }\n\n  _createClass(GenerateWorldForm, [{\n    key: 'submit',\n    value: function submit(e) {\n      e.preventDefault();\n      console.clear();\n      _game.game.map_drawer.map.stage.children.forEach(function (layer) {\n        return layer.removeChildren();\n      });\n      _game.game.generate_world();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement(\n        'div',\n        null,\n        _react2.default.createElement(\n          'form',\n          { className: 'form-horizontal' },\n          _react2.default.createElement(\n            'div',\n            { className: 'form-group' },\n            _react2.default.createElement(\n              'div',\n              { className: 'col-sm-offset-4 col-sm-8' },\n              _react2.default.createElement(\n                'button',\n                { type: 'button', className: 'btn btn-default', id: 'generate_world', onClick: this.submit.bind(this) },\n                'generate'\n              )\n            )\n          )\n        )\n      );\n    }\n  }]);\n\n  return GenerateWorldForm;\n}(_react2.default.Component);\n\nexports.default = GenerateWorldForm;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar InputSpinner = function (_React$Component) {\n  _inherits(InputSpinner, _React$Component);\n\n  function InputSpinner(args) {\n    _classCallCheck(this, InputSpinner);\n\n    var _this = _possibleConstructorReturn(this, (InputSpinner.__proto__ || Object.getPrototypeOf(InputSpinner)).call(this, args));\n\n    _this.state = { value: args.value };\n    _this.name = args.name;\n    _this.min = args.min ? args.min : 0;\n    _this.max = args.max ? args.max : Infinity;\n    return _this;\n  }\n\n  _createClass(InputSpinner, [{\n    key: \"click_up\",\n    value: function click_up(e) {\n      if (this.state.value >= this.max) {\n        return false;\n      }\n      this.update_value(this.state.value + 1);\n      e.preventDefault();\n    }\n  }, {\n    key: \"click_down\",\n    value: function click_down(e) {\n      if (this.state.value <= this.min) {\n        return false;\n      }\n      this.update_value(this.state.value - 1);\n      e.preventDefault();\n    }\n  }, {\n    key: \"manual_set\",\n    value: function manual_set(e) {\n      this.update_value(e.target.value);\n    }\n  }, {\n    key: \"update_value\",\n    value: function update_value(new_value) {\n      this.setState({ value: new_value });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _react2.default.createElement(\n        \"div\",\n        { className: \"input-group\" },\n        _react2.default.createElement(\n          \"span\",\n          { className: \"input-group-btn\" },\n          _react2.default.createElement(\n            \"a\",\n            { className: \"btn btn-danger\", onClick: this.click_down.bind(this) },\n            _react2.default.createElement(\"span\", { className: \"glyphicon glyphicon-minus\" })\n          )\n        ),\n        _react2.default.createElement(\"input\", { id: this.name, type: \"text\", className: \"form-control text-center\", value: this.state.value, onChange: this.manual_set.bind(this) }),\n        _react2.default.createElement(\n          \"span\",\n          { className: \"input-group-btn\" },\n          _react2.default.createElement(\n            \"a\",\n            { className: \"btn btn-info\", onClick: this.click_up.bind(this) },\n            _react2.default.createElement(\"span\", { className: \"glyphicon glyphicon-plus\" })\n          )\n        )\n      );\n    }\n  }]);\n\n  return InputSpinner;\n}(_react2.default.Component);\n\nexports.default = InputSpinner;\n","\"use strict\";\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _util = require(\"experimental/util\");\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _star_system = require(\"experimental/star_system\");\n\nvar _star_system2 = _interopRequireDefault(_star_system);\n\nvar _interaction = require(\"experimental/interaction\");\n\nvar _interaction2 = _interopRequireDefault(_interaction);\n\nvar _map_drawer = require(\"experimental/map_drawer\");\n\nvar _map_drawer2 = _interopRequireDefault(_map_drawer);\n\nvar _app = require(\"experimental/components/app\");\n\nvar _app2 = _interopRequireDefault(_app);\n\nvar _reactDom = require(\"react-dom\");\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Game = function () {\n  function Game() {\n    _classCallCheck(this, Game);\n\n    // CONST\n    this.width = 800;\n    this.height = 800;\n\n    this.map_drawer = new _map_drawer2.default();\n    this.interaction = new _interaction2.default();\n  }\n\n  _createClass(Game, [{\n    key: \"generate_world\",\n    value: function generate_world() {\n      this.star_system = new _star_system2.default();\n      this.star_system.generate();\n\n      this.ticks = 0;\n\n      this.map_drawer.init(this.width, this.height);\n      this.interaction.init();\n\n      this.map_drawer.map.ticker.add(this.handle_tick.bind(this));\n\n      this.map_drawer.init_graphics();\n    }\n  }, {\n    key: \"handle_tick\",\n    value: function handle_tick() {\n      this.ticks++;\n      this.star_system.tick();\n      this.map_drawer.redraw();\n    }\n  }]);\n\n  return Game;\n}();\n\nvar game = new Game();\nmodule.exports.game = game;\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  _reactDom2.default.render(_react2.default.createElement(_app2.default, null), document.querySelector('#app'));\n  game.generate_world();\n});\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _util = require(\"experimental/util\");\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _game = require(\"experimental/game\");\n\nvar _d = require(\"d3\");\n\nvar d3 = _interopRequireWildcard(_d);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Interaction = function () {\n  function Interaction() {\n    _classCallCheck(this, Interaction);\n\n    this.state = 'initial';\n  }\n\n  _createClass(Interaction, [{\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n\n      this.game = _game.game;\n      this.map = this.game.map_drawer.map;\n      this.map.stage.interactive = true;\n\n      document.addEventListener('mousemove', this.map_mouse_move_handler.bind(this), false);\n\n      d3.select('#map').on('click', this.map_click_handler.bind(this));\n\n      // from https://bl.ocks.org/pkerpedjiev/cf791db09ebcabaec0669362f4df1776\n      d3.select('#map').call(d3.zoom().scaleExtent([1, 4]).translateExtent([[0, 0], [this.map.view.width, this.map.view.height]]).on(\"zoom\", this.map_zoom.bind(this)));\n\n      this.ticks = 0; // here?\n      this.fps_div = document.getElementById('fps_counter');\n      this.map.ticker.add(function () {\n        _this.ticks++;\n        if (_this.ticks % 10 == 0) {\n          d3.select('#fps_counter').html(_this.map.ticker.FPS | 0);\n        }\n      });\n      this.update_map_scale();\n    }\n  }, {\n    key: \"map_mouse_move_handler\",\n    value: function map_mouse_move_handler(event) {\n      if (event.target != this.map.view) {\n        //this.game.map_drawer.clear_cell_under_cursor();\n        //this.cell_under_cursor = null;\n        return false;\n      }\n      var mouse_coords = this.get_mouse_coords(event);\n\n      d3.select('#mouse_pos').html('{x: ' + mouse_coords.x + ', y: ' + mouse_coords.y + '}');\n      var world_pos = this.mouse_coords_to_world_coords(mouse_coords);\n      d3.select('#world_pos').html('{x: ' + world_pos.x + ', y: ' + world_pos.y + '}');\n    }\n  }, {\n    key: \"map_click_handler\",\n    value: function map_click_handler() {\n      var mouse_coords = this.get_mouse_coords(d3.event);\n    }\n  }, {\n    key: \"map_zoom\",\n    value: function map_zoom() {\n      this.map.stage.position.x = d3.event.transform.x;\n      this.map.stage.position.y = d3.event.transform.y;\n      this.map.stage.scale.x = d3.event.transform.k;\n      this.map.stage.scale.y = d3.event.transform.k;\n      this.update_map_scale();\n    }\n    ///////////////////////////////////////\n\n\n  }, {\n    key: \"update_map_scale\",\n    value: function update_map_scale() {\n      d3.select('#map_scale').html('{x: ' + this.map.stage.scale.x + ', y: ' + this.map.stage.scale.y + '}');\n    }\n\n    ///////////////////////////////////////  \n    // UTILS\n    ///////////////////////////////////////\n\n  }, {\n    key: \"get_mouse_coords\",\n    value: function get_mouse_coords(event) {\n      return { x: event.offsetX, y: event.offsetY };\n    }\n  }, {\n    key: \"mouse_coords_to_world_coords\",\n    value: function mouse_coords_to_world_coords(mouse_coords) {\n      var xn = Math.floor((mouse_coords.x - this.map.stage.position.x) / this.map.stage.scale.x),\n          yn = Math.floor((mouse_coords.y - this.map.stage.position.y) / this.map.stage.scale.y);\n      return { x: xn, y: yn };\n    }\n  }]);\n\n  return Interaction;\n}();\n\nexports.default = Interaction;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _util = require(\"experimental/util\");\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _color = require(\"experimental/color\");\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _game = require(\"experimental/game\");\n\nvar _blur_generator = require(\"experimental/texture_generators/blur_generator\");\n\nvar _blur_generator2 = _interopRequireDefault(_blur_generator);\n\nvar _points_in_circle = require(\"experimental/texture_generators/points_in_circle\");\n\nvar _points_in_circle2 = _interopRequireDefault(_points_in_circle);\n\nvar _density_map = require(\"experimental/texture_generators/density_map\");\n\nvar _density_map2 = _interopRequireDefault(_density_map);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar MapDrawer = function () {\n  function MapDrawer() {\n    _classCallCheck(this, MapDrawer);\n  }\n\n  _createClass(MapDrawer, [{\n    key: \"init\",\n    value: function init(width, height) {\n      var _this = this;\n\n      var PIXI = require('pixi.js');\n      this.map = new PIXI.Application(width, height, {\n        backgroundColor: _color2.default.to_pixi([0, 0, 0]),\n        antialias: true,\n        view: document.getElementById('map')\n      });\n      console.log('renderer', this.map.renderer);\n\n      this.base_container = new PIXI.Container();\n      this.base_container.scale = { x: 6, y: 6 };\n      this.map.stage.addChild(this.base_container);\n      this.base_container.position.x = width / 2 | 0;\n      this.base_container.position.y = height / 2 | 0;\n\n      this.layers = {};\n      MapDrawer.layers().forEach(function (layer) {\n        _this.layers[layer] = new PIXI.Container();\n        _this.base_container.addChild(_this.layers[layer]);\n      });\n      document.getElementById('map_container').appendChild(this.map.view);\n      this.bodies_graphics = [];\n    }\n  }, {\n    key: \"clear_all\",\n    value: function clear_all() {\n      this.base_container.children.forEach(function (layer) {\n        return layer.removeChildren();\n      });\n    }\n  }, {\n    key: \"init_graphics\",\n    value: function init_graphics() {\n      var _this2 = this;\n\n      this.init_stellar_body(_game.game.star_system.star);\n      _game.game.star_system.planets.forEach(function (planet) {\n        return _this2.init_stellar_body(planet);\n      });\n\n      this.clear_all();\n      var points_count = 5000;\n      //let tg = new PointsInCicrle();\n      var tg = new _density_map2.default();\n      //tg.generate(points_count, PointsInCicrle.linear);\n      //tg.generate(points_count, PointsInCicrle.pow);\n      tg.generate(points_count);\n      var func = tg.draw_density_grid;\n      var container = tg.draw(50, func.bind(tg));\n      //let container = tg.draw_triangles(50);\n      this.layers['test'].addChild(container);\n    }\n  }, {\n    key: \"redraw\",\n    value: function redraw() {\n      //this.bodies_graphics.forEach(graphics => this.update_stellar_body(graphics));\n    }\n  }, {\n    key: \"init_stellar_body\",\n    value: function init_stellar_body(stellar_body) {\n      var graphics = new PIXI.Graphics();\n      graphics.backlink = stellar_body;\n\n      var line_color = _color2.default.to_pixi(_color2.default.darker(stellar_body.color, 30));\n      graphics.lineStyle(stellar_body.radius / 10, line_color);\n      graphics.beginFill(_color2.default.to_pixi(stellar_body.color));\n      graphics.drawCircle(0, 0, stellar_body.radius);\n      graphics.closePath();\n      graphics.endFill();\n\n      this.small_circle(graphics, 0, 1, stellar_body, line_color);\n      this.small_circle(graphics, 0, -1, stellar_body, line_color);\n      this.small_circle(graphics, 1, 0, stellar_body, line_color);\n      this.small_circle(graphics, -1, 0, stellar_body, line_color);\n\n      this.layers['bodies'].addChild(graphics);\n      this.bodies_graphics.push(graphics);\n      this.update_stellar_body(graphics);\n      //console.log('DI', coords, stellar_body.orbital_angle, stellar_body.orbital_radius);\n    }\n  }, {\n    key: \"update_stellar_body\",\n    value: function update_stellar_body(graphics) {\n      var stellar_body = graphics.backlink;\n      var coords = _util2.default.from_polar_coords(stellar_body.orbital_angle, stellar_body.orbital_radius);\n      //console.log('SF', coords);\n      graphics.position.x = coords.x;\n      graphics.position.y = coords.y;\n      graphics.rotation = stellar_body.angle;\n    }\n  }, {\n    key: \"small_circle\",\n    value: function small_circle(graphics, x, y, stellar_body, color) {\n      graphics.lineStyle(stellar_body.radius / 10, _color2.default.to_pixi([0, 0, 0]));\n      graphics.beginFill(color);\n      graphics.drawCircle(x * (stellar_body.radius / 2), y * (stellar_body.radius / 2), stellar_body.radius / 3);\n      graphics.endFill();\n    }\n  }], [{\n    key: \"layers\",\n    value: function layers() {\n      return ['bodies', 'errors', 'test'];\n    }\n  }]);\n\n  return MapDrawer;\n}();\n\nexports.default = MapDrawer;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _util = require(\"experimental/util\");\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _game = require(\"experimental/game\");\n\nvar _stellar_body = require(\"experimental/stellar_body\");\n\nvar _stellar_body2 = _interopRequireDefault(_stellar_body);\n\nvar _color = require(\"experimental/color\");\n\nvar _color2 = _interopRequireDefault(_color);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar StarSystem = function () {\n  function StarSystem() {\n    _classCallCheck(this, StarSystem);\n\n    this.star = null;\n    this.planets = [];\n\n    this.orbital_speed_coef = 0.0025;\n    this.rotation_speed_coef = 0.01;\n  }\n\n  _createClass(StarSystem, [{\n    key: \"generate\",\n    value: function generate() {\n      this.star = new _stellar_body2.default();\n      this.star.radius = 8;\n      this.star.rotation_speed = this.rotation_speed_coef * _util2.default.rand(1, 10);\n      this.star.color = _color2.default.random_near([250, 50, 50]);\n\n      var count_planets = 5;\n      while (count_planets--) {\n        var planet = new _stellar_body2.default();\n        planet.orbital_radius = 10 * (count_planets + 2);\n        planet.radius = _util2.default.rand(1, 5);\n        planet.orbital_speed = this.orbital_speed_coef * _util2.default.rand(1, 10);\n        planet.rotation_speed = this.rotation_speed_coef * _util2.default.rand(1, 10);\n        planet.color = _color2.default.random([200, 200, 200]);\n\n        this.planets.push(planet);\n      }\n    }\n  }, {\n    key: \"tick\",\n    value: function tick() {\n      var _this = this;\n\n      this.update_stellar_body(this.star);\n      this.planets.forEach(function (planet) {\n        return _this.update_stellar_body(planet);\n      });\n    }\n  }, {\n    key: \"update_stellar_body\",\n    value: function update_stellar_body(body) {\n      body.orbital_angle += body.orbital_speed;\n      body.angle += body.rotation_speed;\n    }\n  }]);\n\n  return StarSystem;\n}();\n\nexports.default = StarSystem;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _util = require(\"experimental/util\");\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _game = require(\"experimental/game\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar StellarBody = function StellarBody() {\n  _classCallCheck(this, StellarBody);\n\n  this.orbital_radius = 0;\n  this.radius = 0;\n  this.orbital_speed = 0;\n  this.rotation_speed = 0;\n  // temp\n  this.color = [0, 0, 0];\n\n  this.orbital_angle = 0;\n  this.angle = 0;\n};\n\nexports.default = StellarBody;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _game = require(\"experimental/game\");\n\nvar _util = require(\"experimental/util\");\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _color = require(\"experimental/color\");\n\nvar _color2 = _interopRequireDefault(_color);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar BlurGenerator = function () {\n  function BlurGenerator() {\n    _classCallCheck(this, BlurGenerator);\n\n    this.map = _game.game.map_drawer.map;\n    this.exp_container = new PIXI.Container();\n    this.map.stage.addChild(this.exp_container);\n  }\n\n  _createClass(BlurGenerator, [{\n    key: \"exp_dots\",\n    value: function exp_dots() {\n      var _this = this;\n\n      var points_count_coef = .0050;\n      var points_count = points_count_coef * this.map.view.width * this.map.view.height;\n      var radius_coef = 0.03;\n      var radius = radius_coef * Math.min(this.map.view.width, this.map.view.height);\n      var count_near_threshold = points_count * radius_coef;\n      var steps_count = 10;\n\n      console.log('points_count', points_count, 'radius', radius, 'count_near_threshold', count_near_threshold);\n      var points = [];\n      while (points_count--) {\n        points.push({ x: _util2.default.rand(0, this.map.view.width), y: _util2.default.rand(0, this.map.view.height) });\n      }\n      var basic_color = [60, 30, 0];\n      while (--steps_count) {\n        basic_color = _color2.default.brighter(basic_color, 20);\n        this.exp_dots_step(radius, count_near_threshold / steps_count | 0, points, basic_color);\n      }\n      points.forEach(function (point) {\n        return _this.exp_dots_draw_circle(point.x, point.y, 2, [200, 100, 0]);\n      });\n    }\n  }, {\n    key: \"exp_dots_step\",\n    value: function exp_dots_step(radius, count_near_threshold, points, color) {\n      var _this2 = this;\n\n      console.log('exp_dots_step radius', radius, 'threshold', count_near_threshold);\n      var nears_sum = 10;\n      points.forEach(function (point) {\n        var count_near = _this2.exp_dots_count_near(point, radius, points);\n        nears_sum += count_near;\n        if (count_near >= count_near_threshold) {\n          _this2.exp_dots_draw_circle(point.x, point.y, radius, color);\n        }\n      });\n      console.log('near mid', nears_sum / points.length);\n    }\n  }, {\n    key: \"exp_dots_draw_circle\",\n    value: function exp_dots_draw_circle(x, y, radius, color) {\n      var graphics = new PIXI.Graphics();\n      graphics.beginFill(_color2.default.to_pixi(color));\n      graphics.drawCircle(x, y, radius);\n      graphics.closePath();\n      graphics.endFill();\n      this.exp_container.addChild(graphics);\n    }\n  }, {\n    key: \"exp_dots_count_near\",\n    value: function exp_dots_count_near(from, radius, points) {\n      var filtered = points.filter(function (point) {\n        return _util2.default.distance(from, point) <= radius;\n      });\n      return filtered.length - 1;\n    }\n  }]);\n\n  return BlurGenerator;\n}();\n\nexports.default = BlurGenerator;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _game = require(\"experimental/game\");\n\nvar _util = require(\"experimental/util\");\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _color = require(\"experimental/color\");\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _d = require(\"d3\");\n\nvar d3 = _interopRequireWildcard(_d);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DensityMap = function () {\n  function DensityMap() {\n    _classCallCheck(this, DensityMap);\n\n    this.reject_limit = 500;\n    this.average_distance_threshold = 0.05;\n    this.zero_distance_sum = 0;\n  }\n\n  _createClass(DensityMap, [{\n    key: \"random_point\",\n    value: function random_point() {\n      var initial = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      return { x: 2 * Math.random() - 1, y: 2 * Math.random() - 1, initial: initial };\n    }\n  }, {\n    key: \"generate\",\n    value: function generate(count) {\n      var count_basic = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n\n      var reject_counter = this.reject_limit;\n      var total_rejects = 0;\n      this.points = [];\n      // basic points\n      while (count_basic) {\n        var point = this.random_point(true);\n        if (this.check_in_circle(point)) {\n          this.points.push(point);\n          count_basic--;\n        }\n      }\n      // regular points\n      while (this.points.length < count) {\n        var _point = this.random_point(false);\n        if (!this.check_in_circle(_point)) {\n          continue; // do not decrement reject_counter\n        }\n        if (!this.check_average_distance(_point)) {\n          reject_counter--;\n          total_rejects++;\n        } else {\n          reject_counter = this.reject_limit;\n          this.points.push(_point);\n          this.zero_distance_sum += _util2.default.distance(_point, { x: 0, y: 0 });\n        }\n        if (!reject_counter) {\n          console.log(\"DensityMap.generate() reject limit \" + this.reject_limit + \" reached, bailing out\");\n          break;\n        }\n      }\n      console.log('done, total_rejects: ', total_rejects);\n      return true;\n    }\n  }, {\n    key: \"check_in_circle\",\n    value: function check_in_circle(point) {\n      return _util2.default.distance(point, { x: 0, y: 0 }) <= 1;\n    }\n  }, {\n    key: \"calc_distance_sum\",\n    value: function calc_distance_sum(point) {\n      return this.points.reduce(function (acc, e) {\n        return acc + _util2.default.distance(point, e);\n      }, 0);\n    }\n  }, {\n    key: \"check_average_distance\",\n    value: function check_average_distance(point) {\n      var value = _util2.default.find_min_and_max(this.points, function (p) {\n        return _util2.default.distance(p, point);\n      }).min;\n      //console.log('value', value);\n      // its like some little chanse for far points\n      var rand = value * Math.pow(Math.random(), 100);\n      return value < this.average_distance_threshold + rand;\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(scale) {\n      var func = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.draw_naive.bind(this);\n\n      var graphics = new PIXI.Graphics();\n      func(scale, graphics);\n      return graphics;\n    }\n  }, {\n    key: \"draw_naive\",\n    value: function draw_naive(scale, graphics) {\n      var radius = .01;\n      this.points.forEach(function (point) {\n        //let color = point.initial ? [125, 255, 0] : [point.channel, 0, 0];\n        var color = point.initial ? [125, 255, 0] : [125, 0, 0];\n        graphics.beginFill(_color2.default.to_pixi(color));\n        graphics.drawCircle(scale * point.x, scale * point.y, scale * radius);\n        graphics.closePath();\n        graphics.endFill();\n      });\n    }\n  }, {\n    key: \"draw_density_grid\",\n    value: function draw_density_grid(scale, graphics) {\n      var _this = this;\n\n      var size = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 100;\n\n      var step = (1 - -1) / size;\n      var grid_points = [];\n\n      var _loop = function _loop(y) {\n        var _loop2 = function _loop2(x) {\n          var grid_point = { x: x, y: y, density: 0 };\n          if (!_this.check_in_circle(grid_point)) {\n            return \"continue\";\n          }\n          grid_point.density = _this.points.filter(function (p) {\n            return p.x >= x && p.y >= y && p.x < x + step && p.y < y + step;\n          }).length;\n          grid_points.push(grid_point);\n        };\n\n        for (var x = -1; x < 1; x += step) {\n          var _ret2 = _loop2(x);\n\n          if (_ret2 === \"continue\") continue;\n        }\n      };\n\n      for (var y = -1; y < 1; y += step) {\n        _loop(y);\n      }\n      var max_density = _util2.default.find_min_and_max(grid_points, function (p) {\n        return p.density;\n      }).max;\n      grid_points.forEach(function (point) {\n        var channel = _util2.default.normalize_value(point.density, max_density, 255, 0, 20);\n        graphics.beginFill(_color2.default.to_pixi([channel, 0, 0]));\n        graphics.drawCircle(scale * point.x, scale * point.y, scale * (step / 2));\n        graphics.closePath();\n        graphics.endFill();\n      });\n    }\n  }]);\n\n  return DensityMap;\n}();\n\nexports.default = DensityMap;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _game = require(\"experimental/game\");\n\nvar _util = require(\"experimental/util\");\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _color = require(\"experimental/color\");\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _d = require(\"d3\");\n\nvar d3 = _interopRequireWildcard(_d);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PointsInCicrle = function () {\n  function PointsInCicrle() {\n    _classCallCheck(this, PointsInCicrle);\n  }\n\n  _createClass(PointsInCicrle, [{\n    key: \"generate\",\n    value: function generate(count, func) {\n      this.points = [];\n      while (count--) {\n        var angle = Math.random() * 2 * Math.PI;\n        var radius = func(Math.random());\n        var coords = _util2.default.from_polar_coords(angle, radius);\n        this.points.push({ angle: angle, radius: radius, x: coords.x, y: coords.y });\n      }\n      this.points;\n      return true;\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(scale) {\n      var color = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [50, 100, 0];\n\n      var graphics = new PIXI.Graphics();\n      var radius = .01;\n\n      this.points.forEach(function (point) {\n        graphics.beginFill(_color2.default.to_pixi(_color2.default.random_near(color, 20)));\n        graphics.drawCircle(scale * point.x, scale * point.y, scale * radius);\n        graphics.closePath();\n        graphics.endFill();\n      });\n\n      return graphics;\n    }\n  }, {\n    key: \"draw_triangles\",\n    value: function draw_triangles(scale) {\n      var color = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [50, 100, 0];\n\n      var voronoi = d3.voronoi().x(function (p) {\n        return p.x;\n      }).y(function (p) {\n        return p.y;\n      });\n      var diagram = voronoi(this.points);\n      var triangles = diagram.triangles();\n\n      var graphics = new PIXI.Graphics();\n      triangles.forEach(function (triangle) {\n        graphics.beginFill(_color2.default.to_pixi(_color2.default.random_near(color, 20)));\n        graphics.drawPolygon(triangle.map(function (point) {\n          return new PIXI.Point(scale * point.x, scale * point.y);\n        }));\n        graphics.closePath();\n        graphics.endFill();\n      });\n      graphics.lineStyle(scale * .005, _color2.default.to_pixi(_color2.default.brighter(color, 100)));\n      /*\n      very strange and beautiful\n      diagram.edges.forEach(edge => {\n        if (!edge[1]) {\n          return;\n        }\n        graphics.moveTo(scale * edge[0][0], scale * edge[0][1]);\n        graphics.lineTo(scale * edge[1][0], scale * edge[1][1]);\n        graphics.closePath();\n      });\n      */\n      triangles.forEach(function (triangle) {\n        // pixi has sharp angles when joining lines in path, so do not use path\n        graphics.moveTo(scale * triangle[0].x, scale * triangle[0].y);\n        graphics.lineTo(scale * triangle[1].x, scale * triangle[1].y);\n        graphics.moveTo(scale * triangle[1].x, scale * triangle[1].y);\n        graphics.lineTo(scale * triangle[2].x, scale * triangle[2].y);\n        graphics.moveTo(scale * triangle[2].x, scale * triangle[2].y);\n        graphics.lineTo(scale * triangle[0].x, scale * triangle[0].y);\n      });\n      return graphics;\n    }\n  }], [{\n    key: \"linear\",\n    value: function linear(random) {\n      return random;\n    }\n  }, {\n    key: \"pow\",\n    value: function pow(random) {\n      return Math.pow(random, 0.2);\n    }\n  }]);\n\n  return PointsInCicrle;\n}();\n\nexports.default = PointsInCicrle;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Util = function () {\n  function Util() {\n    _classCallCheck(this, Util);\n  }\n\n  _createClass(Util, null, [{\n    key: 'exec_in_cycle_with_delay',\n    value: function exec_in_cycle_with_delay(index, limit, delay, func) {\n      var final_func = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : function () {};\n\n      if (typeof limit === \"function\" && !limit() || index >= limit) {\n        final_func(index);\n        return;\n      }\n      func(index);\n      setTimeout(function () {\n        Util.exec_in_cycle_with_delay(index + 1, limit, delay, func, final_func);\n      }, delay);\n    }\n  }, {\n    key: 'rand',\n    value: function rand(min, max) {\n      return Math.floor(Math.random() * (max - min + 1) + min);\n    }\n  }, {\n    key: 'rand_element',\n    value: function rand_element(arr) {\n      if (arr.length == 0) return false;\n      return arr[Util.rand(0, arr.length - 1)];\n    }\n  }, {\n    key: 'rand_float',\n    value: function rand_float(min, max) {\n      return Math.random() * (max - min) + min;\n    }\n  }, {\n    key: 'normalize_value',\n    value: function normalize_value(value, max, normal_max) {\n      var min = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var normal_min = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n\n      if (value > max || value < min) {\n        console.log('value out of range', value, max, normal_max, min, normal_min);\n        throw 'value out of range';\n      }\n      return (value - min) * (normal_max - normal_min) / (max - min) + normal_min;\n    }\n\n    ///////////////////////////////////\n    // ARRAYS\n    ///////////////////////////////////\n\n  }, {\n    key: 'last',\n    value: function last(array) {\n      return array.length == 0 ? false : array[array.length - 1];\n    }\n  }, {\n    key: 'push_uniq',\n    value: function push_uniq(element, arr) {\n      if (arr.indexOf(element) == -1) {\n        arr.push(element);\n      }\n    }\n  }, {\n    key: 'merge',\n    value: function merge(arr1, arr2) {\n      arr2.forEach(function (e) {\n        return Util.push_uniq(e, arr1);\n      });\n    }\n  }, {\n    key: 'remove_element',\n    value: function remove_element(element, arr) {\n      var index = arr.indexOf(element);\n      if (index !== -1) {\n        arr.splice(index, 1);\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: 'for_all_consecutive_pairs',\n    value: function for_all_consecutive_pairs(array, fun) {\n      if (array.length < 2) {\n        return false;\n      }\n      for (var i = 0; i < array.length; i++) {\n        var cur = array[i];\n        var next_index = i + 1 == array.length ? 0 : i + 1;\n        var next = array[next_index];\n        fun(cur, next, i, next_index);\n      }\n    }\n  }, {\n    key: 'find_min_and_max',\n    value: function find_min_and_max(array, value_func) {\n      if (!array.length) return false;\n      var ret = { min: null, max: null, min_element: null, max_element: null };\n      array.forEach(function (e) {\n        var res = value_func(e);\n        if (isNaN(res) || res === null) return;\n        if (ret.min == null || ret.max == null) {\n          ret.min = res;\n          ret.max = res;\n          ret.min_element = e;\n          ret.max_element = e;\n          return;\n        }\n        if (res < ret.min) {\n          ret.min = res;\n          ret.min_element = e;\n        }\n        if (res > ret.max) {\n          ret.max = res;\n          ret.max_element = e;\n        }\n      });\n      return ret;\n    }\n\n    // ??? experimental. some standard routine for cyclic open_list processing\n\n  }, {\n    key: 'do_while_not_empty',\n    value: function do_while_not_empty(open_list, func) {\n      var length_before = void 0,\n          step = 0;\n      do {\n        length_before = open_list.length;\n        open_list = open_list.filter(function (element) {\n          return !func(element, step++);\n        });\n        if (length_before == open_list.length) {\n          console.log('do_while_not_empty() open_list length not chenged, bailing out', length_before, open_list);\n          return false;\n        }\n      } while (open_list.length);\n      return true;\n    }\n\n    //////////////////////////////////////////\n    // geometry\n    //////////////////////////////////////////\n\n  }, {\n    key: 'to_polar_coords',\n    value: function to_polar_coords(x, y) {\n      var radius = Math.sqrt(x * x + y * y);\n      var angle = Math.atan2(y, x);\n      return { angle: angle, radius: radius };\n    }\n  }, {\n    key: 'from_polar_coords',\n    value: function from_polar_coords(angle, radius) {\n      var x = radius * Math.cos(angle);\n      var y = radius * Math.sin(angle);\n      return { x: x, y: y };\n    }\n  }, {\n    key: 'radians',\n    value: function radians(degrees) {\n      return degrees * Math.PI / 180;\n    }\n  }, {\n    key: 'degrees',\n    value: function degrees(radians) {\n      return radians * 180 / Math.PI;\n    }\n  }, {\n    key: 'move_by_vector',\n    value: function move_by_vector(xf, yf, xt, yt, length) {\n      // why i wrote j_max + 1? thats for last gradient area -- otherwise it will be just a single dot\n      return [xf + (xt - xf) * length, yf + (yt - yf) * length];\n    }\n  }, {\n    key: 'convex_polygon_centroid',\n    value: function convex_polygon_centroid(points) {\n      var p1 = points[0];\n      var square_sum = 0;\n      var xc = 0,\n          yc = 0;\n      for (var i = 1; i < points.length - 1; i++) {\n        var p2 = points[i];\n        var p3 = points[i + 1];\n        var square = ((p1.x - p3.x) * (p2.y - p3.y) - (p2.x - p3.x) * (p1.y - p3.y)) / 2; // triangle square\n        square_sum += square;\n        xc += square * (p1.x + p2.x + p3.x) / 3;\n        yc += square * (p1.y + p2.y + p3.y) / 3;\n      }\n      return { x: xc / square_sum, y: yc / square_sum };\n    }\n\n    // points should be sorted by angle to center!!!\n\n  }, {\n    key: 'convex_polygon_square',\n    value: function convex_polygon_square(points) {\n      var p1 = points[0];\n      var square = 0;\n      for (var i = 1; i < points.length - 1; i++) {\n        var p2 = points[i];\n        var p3 = points[i + 1];\n        square += Math.abs((p1.x - p3.x) * (p2.y - p3.y) - (p2.x - p3.x) * (p1.y - p3.y)) / 2;\n      }\n      return square;\n    }\n  }, {\n    key: 'distance',\n    value: function distance(p1, p2) {\n      return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\n    }\n  }]);\n\n  return Util;\n}();\n\nexports.default = Util;\n"]}