{"version":3,"sources":["app/color.js","app/components/app.jsx","app/components/collapsible_panel.jsx","app/components/debug_info.jsx","app/components/generate_world_form.jsx","app/components/input_spinner.jsx","app/game.js","app/initialize.js","app/interaction.js","app/map_drawer.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnGA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3GA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxEA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3EA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5EA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhGA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjEA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnBA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApHA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnEA;AAAA","file":"public/app.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _util = require(\"util\");\n\nvar _util2 = _interopRequireDefault(_util);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Color = function () {\n  function Color() {\n    _classCallCheck(this, Color);\n  }\n\n  _createClass(Color, null, [{\n    key: \"random_near\",\n    value: function random_near(_ref) {\n      var _ref2 = _slicedToArray(_ref, 3),\n          r = _ref2[0],\n          g = _ref2[1],\n          b = _ref2[2];\n\n      var step = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n      var count = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 2;\n\n      return Color.for_rgb([r, g, b], function (e) {\n        return Color.random_channel(e, step, count);\n      });\n    }\n  }, {\n    key: \"random\",\n    value: function random(_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 3),\n          r = _ref4[0],\n          g = _ref4[1],\n          b = _ref4[2];\n\n      var step = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n\n      return Color.for_rgb([r, g, b], function (e) {\n        return Color.random_by_floor(e, step);\n      });\n    }\n  }, {\n    key: \"to_pixi\",\n    value: function to_pixi(_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 3),\n          r = _ref6[0],\n          g = _ref6[1],\n          b = _ref6[2];\n\n      return (r << 16) + (g << 8) + b;\n    }\n\n    // PRIVATE\n\n  }, {\n    key: \"for_rgb\",\n    value: function for_rgb(_ref7, func) {\n      var _ref8 = _slicedToArray(_ref7, 3),\n          r = _ref8[0],\n          g = _ref8[1],\n          b = _ref8[2];\n\n      return [func(r), func(g), func(b)];\n    }\n\n    // PRIVATE\n\n  }, {\n    key: \"random_channel\",\n    value: function random_channel(base, step, count) {\n      var rand = step * _util2.default.rand(-count, count);\n      var res = base + rand;\n      return res > 255 ? 255 : res < 0 ? 0 : res;\n    }\n\n    // PRIVATE\n\n  }, {\n    key: \"random_by_floor\",\n    value: function random_by_floor(floor, step) {\n      return floor - step * _util2.default.rand(0, floor / step | 0);\n    }\n  }]);\n\n  return Color;\n}();\n\nexports.default = Color;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _collapsible_panel = require('components/collapsible_panel');\n\nvar _collapsible_panel2 = _interopRequireDefault(_collapsible_panel);\n\nvar _debug_info = require('components/debug_info');\n\nvar _debug_info2 = _interopRequireDefault(_debug_info);\n\nvar _generate_world_form = require('components/generate_world_form');\n\nvar _generate_world_form2 = _interopRequireDefault(_generate_world_form);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar App = function (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App() {\n    _classCallCheck(this, App);\n\n    return _possibleConstructorReturn(this, (App.__proto__ || Object.getPrototypeOf(App)).apply(this, arguments));\n  }\n\n  _createClass(App, [{\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement(\n        'table',\n        { style: { margin: '5px', borderSpacing: '5px', borderCollapse: 'separate' } },\n        _react2.default.createElement(\n          'tbody',\n          null,\n          _react2.default.createElement(\n            'tr',\n            { style: { verticalAlign: 'top' } },\n            _react2.default.createElement(\n              'td',\n              null,\n              _react2.default.createElement(\n                'div',\n                { className: 'panel-group' },\n                _react2.default.createElement(\n                  'div',\n                  { className: 'panel panel-success' },\n                  _react2.default.createElement(\n                    'div',\n                    { className: 'panel-body' },\n                    _react2.default.createElement(\n                      'div',\n                      { className: '', id: 'map_container' },\n                      _react2.default.createElement('canvas', { id: 'map', width: '800', height: '800' })\n                    )\n                  )\n                ),\n                _react2.default.createElement(_collapsible_panel2.default, { header: 'debug', name: 'debug', content_func: function content_func() {\n                    return _react2.default.createElement(_debug_info2.default);\n                  } })\n              )\n            ),\n            _react2.default.createElement(\n              'td',\n              { width: '100%' },\n              _react2.default.createElement(\n                'div',\n                { className: 'panel-group' },\n                _react2.default.createElement(\n                  'div',\n                  { className: 'panel panel-success' },\n                  _react2.default.createElement(\n                    'div',\n                    { className: 'panel-body' },\n                    _react2.default.createElement(_collapsible_panel2.default, { header: 'world generating', name: 'generate_world', content_func: function content_func() {\n                        return _react2.default.createElement(_generate_world_form2.default);\n                      } })\n                  ),\n                  _react2.default.createElement('div', { className: 'panel-footer' })\n                )\n              )\n            )\n          )\n        )\n      );\n    }\n  }]);\n\n  return App;\n}(_react2.default.Component);\n\nexports.default = App;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CollapsiblePanel = function (_React$Component) {\n  _inherits(CollapsiblePanel, _React$Component);\n\n  function CollapsiblePanel(args) {\n    _classCallCheck(this, CollapsiblePanel);\n\n    var _this = _possibleConstructorReturn(this, (CollapsiblePanel.__proto__ || Object.getPrototypeOf(CollapsiblePanel)).call(this));\n\n    _this.header = args.header;\n    _this.name = args.name;\n    _this.content_func = args.content_func;\n    return _this;\n  }\n\n  _createClass(CollapsiblePanel, [{\n    key: \"render\",\n    value: function render() {\n      return _react2.default.createElement(\n        \"div\",\n        { className: \"panel panel-success\" },\n        _react2.default.createElement(\n          \"div\",\n          { className: \"panel-heading\" },\n          _react2.default.createElement(\n            \"h4\",\n            { className: \"panel-title\" },\n            _react2.default.createElement(\n              \"a\",\n              { \"data-toggle\": \"collapse\", href: '#' + this.name },\n              this.header,\n              \" \",\n              _react2.default.createElement(\"span\", { className: \"caret\" })\n            )\n          )\n        ),\n        _react2.default.createElement(\n          \"div\",\n          { id: this.name, className: \"panel-collapse collapse\" },\n          _react2.default.createElement(\n            \"div\",\n            { className: \"panel-body\" },\n            this.content_func()\n          )\n        )\n      );\n    }\n  }]);\n\n  return CollapsiblePanel;\n}(_react2.default.Component);\n\nexports.default = CollapsiblePanel;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar DebugInfo = function (_React$Component) {\n  _inherits(DebugInfo, _React$Component);\n\n  function DebugInfo() {\n    _classCallCheck(this, DebugInfo);\n\n    return _possibleConstructorReturn(this, (DebugInfo.__proto__ || Object.getPrototypeOf(DebugInfo)).apply(this, arguments));\n  }\n\n  _createClass(DebugInfo, [{\n    key: \"render\",\n    value: function render() {\n      return _react2.default.createElement(\n        \"div\",\n        null,\n        _react2.default.createElement(\n          \"div\",\n          null,\n          \"FPS: \",\n          _react2.default.createElement(\"span\", { id: \"fps_counter\" })\n        ),\n        _react2.default.createElement(\n          \"div\",\n          null,\n          \"map scale: \",\n          _react2.default.createElement(\"span\", { id: \"map_scale\" })\n        ),\n        _react2.default.createElement(\n          \"div\",\n          null,\n          \"mouse position: \",\n          _react2.default.createElement(\n            \"span\",\n            { id: \"mouse_pos\" },\n            (0, 0)\n          )\n        ),\n        _react2.default.createElement(\n          \"div\",\n          null,\n          \"world point: \",\n          _react2.default.createElement(\n            \"span\",\n            { id: \"world_pos\" },\n            (0, 0)\n          )\n        )\n      );\n    }\n  }]);\n\n  return DebugInfo;\n}(_react2.default.Component);\n\nexports.default = DebugInfo;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _input_spinner = require('components/input_spinner');\n\nvar _input_spinner2 = _interopRequireDefault(_input_spinner);\n\nvar _game = require('game');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar GenerateWorldForm = function (_React$Component) {\n  _inherits(GenerateWorldForm, _React$Component);\n\n  function GenerateWorldForm() {\n    _classCallCheck(this, GenerateWorldForm);\n\n    return _possibleConstructorReturn(this, (GenerateWorldForm.__proto__ || Object.getPrototypeOf(GenerateWorldForm)).apply(this, arguments));\n  }\n\n  _createClass(GenerateWorldForm, [{\n    key: 'submit',\n    value: function submit(e) {\n      e.preventDefault();\n      console.clear();\n      _game.game.map_drawer.map.stage.children.forEach(function (layer) {\n        return layer.removeChildren();\n      });\n      _game.game.generate_world();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement(\n        'div',\n        null,\n        _react2.default.createElement(\n          'form',\n          { className: 'form-horizontal' },\n          _react2.default.createElement(\n            'div',\n            { className: 'form-group' },\n            _react2.default.createElement(\n              'div',\n              { className: 'col-sm-offset-4 col-sm-8' },\n              _react2.default.createElement(\n                'button',\n                { type: 'button', className: 'btn btn-default', id: 'generate_world', onClick: this.submit.bind(this) },\n                'generate'\n              )\n            )\n          )\n        )\n      );\n    }\n  }]);\n\n  return GenerateWorldForm;\n}(_react2.default.Component);\n\nexports.default = GenerateWorldForm;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar InputSpinner = function (_React$Component) {\n  _inherits(InputSpinner, _React$Component);\n\n  function InputSpinner(args) {\n    _classCallCheck(this, InputSpinner);\n\n    var _this = _possibleConstructorReturn(this, (InputSpinner.__proto__ || Object.getPrototypeOf(InputSpinner)).call(this, args));\n\n    _this.state = { value: args.value };\n    _this.name = args.name;\n    _this.min = args.min ? args.min : 0;\n    _this.max = args.max ? args.max : Infinity;\n    return _this;\n  }\n\n  _createClass(InputSpinner, [{\n    key: \"click_up\",\n    value: function click_up(e) {\n      if (this.state.value >= this.max) {\n        return false;\n      }\n      this.update_value(this.state.value + 1);\n      e.preventDefault();\n    }\n  }, {\n    key: \"click_down\",\n    value: function click_down(e) {\n      if (this.state.value <= this.min) {\n        return false;\n      }\n      this.update_value(this.state.value - 1);\n      e.preventDefault();\n    }\n  }, {\n    key: \"manual_set\",\n    value: function manual_set(e) {\n      this.update_value(e.target.value);\n    }\n  }, {\n    key: \"update_value\",\n    value: function update_value(new_value) {\n      this.setState({ value: new_value });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _react2.default.createElement(\n        \"div\",\n        { className: \"input-group\" },\n        _react2.default.createElement(\n          \"span\",\n          { className: \"input-group-btn\" },\n          _react2.default.createElement(\n            \"a\",\n            { className: \"btn btn-danger\", onClick: this.click_down.bind(this) },\n            _react2.default.createElement(\"span\", { className: \"glyphicon glyphicon-minus\" })\n          )\n        ),\n        _react2.default.createElement(\"input\", { id: this.name, type: \"text\", className: \"form-control text-center\", value: this.state.value, onChange: this.manual_set.bind(this) }),\n        _react2.default.createElement(\n          \"span\",\n          { className: \"input-group-btn\" },\n          _react2.default.createElement(\n            \"a\",\n            { className: \"btn btn-info\", onClick: this.click_up.bind(this) },\n            _react2.default.createElement(\"span\", { className: \"glyphicon glyphicon-plus\" })\n          )\n        )\n      );\n    }\n  }]);\n\n  return InputSpinner;\n}(_react2.default.Component);\n\nexports.default = InputSpinner;\n","\"use strict\";\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _util = require(\"util\");\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _interaction = require(\"interaction\");\n\nvar _interaction2 = _interopRequireDefault(_interaction);\n\nvar _map_drawer = require(\"map_drawer\");\n\nvar _map_drawer2 = _interopRequireDefault(_map_drawer);\n\nvar _reactDom = require(\"react-dom\");\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _app = require(\"components/app\");\n\nvar _app2 = _interopRequireDefault(_app);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Game = function () {\n  function Game() {\n    _classCallCheck(this, Game);\n\n    // CONST\n    this.width = 800;\n    this.height = 800;\n\n    this.map_drawer = new _map_drawer2.default();\n    this.interaction = new _interaction2.default();\n  }\n\n  _createClass(Game, [{\n    key: \"generate_world\",\n    value: function generate_world() {\n      // ...\n\n      this.map_drawer.init(this.width, this.height);\n      this.interaction.init();\n      this.map_drawer.draw();\n    }\n  }]);\n\n  return Game;\n}();\n\nvar game = new Game();\nmodule.exports.game = game;\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  _reactDom2.default.render(_react2.default.createElement(_app2.default, null), document.querySelector('#app'));\n  game.generate_world();\n});\n","'use strict';\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _app = require('components/app');\n\nvar _app2 = _interopRequireDefault(_app);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  _reactDom2.default.render(_react2.default.createElement(_app2.default, null), document.querySelector('#app'));\n});\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _util = require(\"util\");\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _d = require(\"d3\");\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _game = require(\"game\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Interaction = function () {\n  function Interaction() {\n    _classCallCheck(this, Interaction);\n\n    this.state = 'initial';\n  }\n\n  _createClass(Interaction, [{\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n\n      this.game = _game.game;\n      this.map = this.game.map_drawer.map;\n      this.map.stage.interactive = true;\n\n      document.addEventListener('mousemove', this.map_mouse_move_handler.bind(this), false);\n\n      d3.select('#map').on('click', this.map_click_handler.bind(this));\n\n      // from https://bl.ocks.org/pkerpedjiev/cf791db09ebcabaec0669362f4df1776\n      d3.select('#map').call(d3.zoom().scaleExtent([1, 4]).translateExtent([[0, 0], [this.map.view.width, this.map.view.height]]).on(\"zoom\", this.map_zoom.bind(this)));\n\n      this.ticks = 0; // here?\n      this.fps_div = document.getElementById('fps_counter');\n      this.map.ticker.add(function () {\n        _this.ticks++;\n        if (_this.ticks % 10 == 0) {\n          d3.select('#fps_counter').html(_this.map.ticker.FPS | 0);\n        }\n      });\n      this.update_map_scale();\n    }\n  }, {\n    key: \"map_mouse_move_handler\",\n    value: function map_mouse_move_handler(event) {\n      if (event.target != this.map.view) {\n        //this.game.map_drawer.clear_cell_under_cursor();\n        //this.cell_under_cursor = null;\n        return false;\n      }\n      var mouse_coords = this.get_mouse_coords(event);\n\n      d3.select('#mouse_pos').html('{x: ' + mouse_coords.x + ', y: ' + mouse_coords.y + '}');\n      var world_pos = this.mouse_coords_to_world_coords(mouse_coords);\n      d3.select('#world_pos').html('{x: ' + world_pos.x + ', y: ' + world_pos.y + '}');\n    }\n  }, {\n    key: \"map_click_handler\",\n    value: function map_click_handler() {\n      var mouse_coords = this.get_mouse_coords(d3.event);\n    }\n  }, {\n    key: \"map_zoom\",\n    value: function map_zoom() {\n      this.map.stage.position.x = d3.event.transform.x;\n      this.map.stage.position.y = d3.event.transform.y;\n      this.map.stage.scale.x = d3.event.transform.k;\n      this.map.stage.scale.y = d3.event.transform.k;\n      this.update_map_scale();\n    }\n    ///////////////////////////////////////\n\n\n  }, {\n    key: \"update_map_scale\",\n    value: function update_map_scale() {\n      d3.select('#map_scale').html('{x: ' + this.map.stage.scale.x + ', y: ' + this.map.stage.scale.y + '}');\n    }\n\n    ///////////////////////////////////////  \n    // UTILS\n    ///////////////////////////////////////\n\n  }, {\n    key: \"get_mouse_coords\",\n    value: function get_mouse_coords(event) {\n      return { x: event.offsetX, y: event.offsetY };\n    }\n  }, {\n    key: \"mouse_coords_to_world_coords\",\n    value: function mouse_coords_to_world_coords(mouse_coords) {\n      var xn = Math.floor((mouse_coords.x - this.map.stage.position.x) / this.map.stage.scale.x),\n          yn = Math.floor((mouse_coords.y - this.map.stage.position.y) / this.map.stage.scale.y);\n      return { x: xn, y: yn };\n    }\n  }]);\n\n  return Interaction;\n}();\n\nexports.default = Interaction;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _util = require(\"util\");\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _color = require(\"color\");\n\nvar _color2 = _interopRequireDefault(_color);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar MapDrawer = function () {\n  function MapDrawer() {\n    _classCallCheck(this, MapDrawer);\n  }\n\n  _createClass(MapDrawer, [{\n    key: \"init\",\n    value: function init(width, height) {\n      var _this = this;\n\n      var PIXI = require('pixi.js');\n      this.map = new PIXI.Application(width, height, {\n        backgroundColor: _color2.default.to_pixi([0, 0, 0]),\n        antialias: true,\n        view: document.getElementById('map')\n      });\n      console.log('renderer', this.map.renderer);\n      this.layers = {};\n      MapDrawer.layers().forEach(function (layer) {\n        _this.layers[layer] = new PIXI.Container();\n        _this.map.stage.addChild(_this.layers[layer]);\n      });\n      document.getElementById('map_container').appendChild(this.map.view);\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {}\n  }], [{\n    key: \"layers\",\n    value: function layers() {\n      // edges -- test for rivers by edges\n      return [\n      // cells filling\n      'regions', 'geo', 'heights', 'dim_cells',\n      // all items, objects, all that 'upon' the ground\n      'borders', 'water', 'rrt_links', 'arrows', 'edges', 'roads', 'errors',\n      // interaction routines\n      'selection', 'under_cursor',\n      // other\n      'dim'];\n    }\n  }]);\n\n  return MapDrawer;\n}();\n\nexports.default = MapDrawer;\n"]}